<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <title>{$maccms.site_name}</title>
      <meta name="keywords" content="{$maccms.site_keywords}">
      <meta name="description" content="{$maccms.site_description}">
      <meta name="renderer" content="webkit|ie-comp|ie-stand">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      {include file="public/include"}
      {include file="public/head"}
</head>
   <body class="homebody">
    <section class="hero">
        <div class="swiper mySwiper">
          <div class="swiper-wrapper">
            {maccms:vod level="9" num="4" by="time" order="desc"}
            <div class="swiper-slide" title="{$vo.vod_name}{$key}">
              <div class="slide-background">
                <!-- Use data-src for lazy loading and add a preloader div 
                <img data-src="{if !empty($vo.vod_pic_slide)}{$vo.vod_pic_slide|mac_url_img}{else/}{$vo.vod_pic|mac_url_img}{/if}" class="swiper-lazy" alt="{$vo.vod_name}">
                <div class="swiper-lazy-preloader"></div>-->
                <img src="{if !empty($vo.vod_pic_slide)}{$vo.vod_pic_slide|mac_url_img}{else/}{$vo.vod_pic|mac_url_img}{/if}" alt="{$vo.vod_name}">
              </div>
              <div class="slide-content">
                <div class="slide-infoandplay">
                  <h2 class="slide-title">{$vo.vod_name}</h2>
                  <a class="homeslider-play-button" href="{$vo|mac_url_vod_play}" alt="{$vo.vod_name}">播放</a>
                </div>
              </div>
            </div>
            {/maccms:vod}
          </div>
          <!-- Pagination and navigation buttons -->
          <div class="swiper-pagination"></div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
        </div>
      </section>
      <main class="layoutMain">
         <div class="responsive">
            <div class="responsive-left">
               <!-- Add content for left sidebar if needed -->
            </div>
            <div class="responsive-center">
               <div class="parent-category">
                  {maccms:type ids="parent" order="asc" by="sort" flag="vod"}
                  <section>
                     <h2 class="{if $key == 1}section-title-first{else}section-title{/if}">
                        {$vo.type_name}
                        <a href="{:mac_url_type($vo)}" class="more-link">
                           更多
                           <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="11" height="11" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 298 511.93" class="more-link-icon"><path fill="currentColor" fill-rule="nonzero" d="M70.77 499.85c-16.24 16.17-42.53 16.09-58.69-.15-16.17-16.25-16.09-42.54.15-58.7l185.5-185.03L12.23 70.93c-16.24-16.16-16.32-42.45-.15-58.7 16.16-16.24 42.45-16.32 58.69-.15l215.15 214.61c16.17 16.25 16.09 42.54-.15 58.7l-215 214.46z"/></svg>
                            
                        </a>
                     </h2>
                     <div class="content-grid">
                        {maccms:vod num="12" type="'.$vo['type_id'].'" by="time" order="desc"}
                        <div class="content-item">
                          <a href="{:mac_url_vod_detail($vo)}" title="{$vo.vod_name}" draggable="false">
                             <div class="lazyload-image-container">
                                <div class="lazyload-image-skeleton skeleton"></div>
                                <img data-src="{$vo.vod_pic}" alt="{$vo.vod_name}" class="lazyload" loading="lazy" draggable="false">
                             </div>
                             <div class="show-name">{$vo.vod_name}</div>
                             <div class="overlay">
                                <div class="title">
                                   {$vo.vod_name}
                                </div>
                                <div class="info-typename-remark-time">
                                   <p><span>{$vo.type.type_name}</span></p>
                                   <p>{$vo.vod_remarks} <span class="info-typename-remark-time-vod-time">{$vo.vod_time|date='Y-m-d',###}</span></p>
                                </div>
                             </div>
                           </a>
                        </div>
                        {/maccms:vod}
                     </div>
                  </section>
                  {/maccms:type}
               </div>
               <!-- ... (second section remains the same) ... -->
            </div>
            <div class="responsive-right">
               <!-- Add content for right sidebar if needed -->
            </div>
         </div>
      </main>
      <script>
        var swiper = new Swiper(".mySwiper", {
          slidesPerView: 1,
          spaceBetween: 0,
          loop: true,
          autoplay: {
            delay: 5000,
            disableOnInteraction: false,
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },
          /*lazy: {
            loadOnTransitionStart: true, // Load images when the slide is about to transition
            loadPrevNext: true, // Load the next and previous slides in view
            loadPrevNextAmount: 1, // Load 1 slide before and after the current slide
            loadOnScroll: true, // Load images when the user scrolls
            elementClass: "swiper-lazy", // Class for the lazy loading element
            loadingElement: "<div class='swiper-lazy-preloader'></div>", // Preloader element
          },
          preloadImages: false, // Disable preloading of all images*/
          preloadImages: true,
          dynamicBullets: true, // Enable dynamic bullets for better performance
        });
      </script>
 <!-- Anti-hijacking and URL obfuscation -->
 <script src="{$maccms.path_tpl}js/url-obfuscator.js"></script>
 
 <script src="{$maccms.path_tpl}js/modern-skeletonhider.js"></script>
   </body>
   {include file="public/foot"}
</html>