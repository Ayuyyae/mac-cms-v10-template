{php}
if(!empty($obj['type_extend']['class'])) {
$classArray=explode(',',$obj['type_extend']['class']);
}elseif(!empty($obj['parent']['type_extend']['class'])){
$classArray=explode(',',$obj['parent']['type_extend']['class']);
}else{
$classArray=explode(',',$GLOBALS['config']['app']['vod_extend_class']);
}
if(!empty($obj['type_extend']['area'])) {
$areaArray=explode(',',$obj['type_extend']['area']);
}elseif(!empty($obj['parent']['type_extend']['area'])){
$areaArray=explode(',',$obj['parent']['type_extend']['area']);
}else{
$areaArray=explode(',',$GLOBALS['config']['app']['vod_extend_area']);
}
if(!empty($obj['type_extend']['year'])) {
$yearArray=explode(',',$obj['type_extend']['year']);
}elseif(!empty($obj['parent']['type_extend']['year'])){
$yearArray=explode(',',$obj['parent']['type_extend']['year']);
}else{
$yearArray=explode(',',$GLOBALS['config']['app']['vod_extend_year']);
}

if(!empty($obj['type_extend']['lang'])) {
$langArray=explode(',',$obj['type_extend']['lang']);
}elseif(!empty($obj['parent']['type_extend']['lang'])){
$langArray=explode(',',$obj['parent']['type_extend']['lang']);
}else{
$langArray=explode(',',$GLOBALS['config']['app']['vod_extend_lang']);
}
if(!empty($obj['type_extend']['version'])) {
$versionArray=explode(',',$obj['type_extend']['version']);
}elseif(!empty($obj['parent']['type_extend']['version'])){
$versionArray=explode(',',$obj['parent']['type_extend']['version']);
}else{
$versionArray=explode(',',$GLOBALS['config']['app']['vod_extend_version']);
}
if(!empty($obj['type_extend']['state'])) {
$stateArray=explode(',',$obj['type_extend']['state']);
}elseif(!empty($obj['parent']['type_extend']['state'])){
$stateArray=explode(',',$obj['parent']['type_extend']['state']);
}else{
$stateArray=explode(',',$GLOBALS['config']['app']['vod_extend_state']);
}
$letterArray=explode(',','A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z');
if(!empty($obj['childids'])){
$parent_obj=$obj;
}elseif(!empty($obj['parent'])){
$parent_obj=$obj['parent'];
}
{/php}
{php}
if($maccms['aid']==11){
$myPageUrl='vod/type';
}elseif($maccms['aid']==12){
$myPageUrl='vod/show';
}
{/php}
<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <title>{$obj.type_title} - 第{$param.page}页 - {$maccms.site_name}</title>
      <meta name="keywords" content="{$obj.type_key}">
      <meta name="description" content="{$obj.type_des}">
      <meta name="renderer" content="webkit|ie-comp|ie-stand">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
   {include file="public/include"}
   {include file="public/head"}
   </head>
   <body>
      <main class="layoutMain">
         <div class="responsive">
            <div class="responsive-left">
               <!-- Add content for left sidebar if needed -->
            </div>
            <div class="responsive-center">
               <div class="parent-category">
                  <section class="category-filter">
                     <dl class="filter-row clearfix">
                        <dt><span>频道</span></dt>
                        <dd class="filter-slider filter-nav">
                           <div class="slider-content">
                              {maccms:type ids="parent" flag="vod" by="sort" order="asc"}
                              <a class="filter-item slider-item{if $vo.type_id==$obj.type_id||$vo.type_id==$obj.type_pid} selected{/if}" href="{:mac_url_type($vo,[],'show')}">{$vo.type_name}</a>
                              {/maccms:type}
                           </div>
                        </dd>
                        <button class="filter-toggle" aria-label="Toggle filters">
                           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <polyline points="18 15 12 9 6 15"></polyline>
                           </svg>
                        </button>
                     </dl>
                     <div class="collapsible-rows">
                     {if !empty($parent_obj.type_id)}
                     <dl class="filter-row clearfix">
                        <dt><span>分类</span></dt>
                        <dd class="filter-slider filter-nav">
                           <div class="slider-content">
                              <a class="filter-item slider-item{if $parent_obj.type_id==$obj.type_id} selected{/if}" href="{:mac_url_type($parent_obj,[],'show')}">全部</a>
                              {maccms:type ids="child" flag="vod" parent="'.$parent_obj['type_id'].'" by="sort" order="asc"}
                              <a class="filter-item slider-item{if $vo.type_id==$obj.type_id} selected{/if}" href="{:mac_url_type($vo,[],'show')}">{$vo.type_name}</a>
                              {/maccms:type}
                           </div>
                        </dd>
                     </dl>
                     {/if}
                     {if !empty($areaArray)}
                     <dl class="filter-row clearfix">
                        <dt><span>地区</span></dt>
                        <dd class="filter-slider filter-nav">
                           <div class="slider-content">
                              <a class="filter-item slider-item{if empty($param.area)} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'lang'=>$param.lang,'year'=>$param.year,'letter'=>$param.letter,'by'=>$param.by],'show')}">全部</a>
                              {maccms:foreach name="$areaArray"}
                              <a class="filter-item slider-item{if $param.area==$vo} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$vo,'lang'=>$param.lang,'year'=>$param.year,'letter'=>$param.letter,'by'=>$param.by],'show')}">{$vo}</a>
                              {/maccms:foreach}
                           </div>
                        </dd>
                     </dl>
                     {/if}
                     {if !empty($classArray)}
                     <dl class="filter-row clearfix">
                        <dt><span>剧情</span></dt>
                        <dd class="filter-slider filter-nav">
                           <div class="slider-content">
                              <a class="filter-item slider-item{if empty($param.class)} selected{/if}" href="{:mac_url_type($obj,['area'=>$param.area,'lang'=>$param.lang,'year'=>$param.year,'letter'=>$param.letter,'by'=>$param.by],'show')}">全部</a>
                              {maccms:foreach name="$classArray"}
                              <a class="filter-item slider-item{if $param.class==$vo} selected{/if}" href="{:mac_url_type($obj,['class'=>$vo,'area'=>$param.area,'lang'=>$param.lang,'year'=>$param.year,'letter'=>$param.letter,'by'=>$param.by],'show')}">{$vo}</a>
                              {/maccms:foreach}
                           </div>
                        </dd>
                     </dl>
                     {/if}
                     {if !empty($langArray)}
                     <dl class="filter-row clearfix">
                        <dt><span>语言</span></dt>
                        <dd class="filter-slider filter-nav">
                           <div class="slider-content">
                              <a class="filter-item slider-item{if empty($param.lang)} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$param.area,'year'=>$param.year,'letter'=>$param.letter,'by'=>$param.by],'show')}">全部</a>
                              {maccms:foreach name="$langArray"}
                              <a class="filter-item slider-item{if $param.lang==$vo} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$param.area,'lang'=>$vo,'year'=>$param.year,'letter'=>$param.letter,'by'=>$param.by],'show')}">{$vo}</a>
                              {/maccms:foreach}
                           </div>
                        </dd>
                     </dl>
                     {/if}
                     {if !empty($yearArray)}
                     <dl class="filter-row clearfix">
                        <dt><span>年份</span></dt>
                        <dd class="filter-slider filter-nav">
                           <div class="slider-content">
                              <a class="filter-item slider-item{if empty($param.year)} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$param.area,'lang'=>$param.lang,'letter'=>$param.letter,'by'=>$param.by],'show')}">全部</a>
                              {maccms:foreach name="$yearArray"}
                              <a class="filter-item slider-item{if $param.year==$vo} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$param.area,'lang'=>$param.lang,'year'=>$vo,'letter'=>$param.letter,'by'=>$param.by],'show')}">{$vo}</a>
                              {/maccms:foreach}
                           </div>
                        </dd>
                     </dl>
                     {/if}
                     {if !empty($letterArray)}
                     <dl class="filter-row clearfix">
                        <dt><span>字母</span></dt>
                        <dd class="filter-slider filter-nav">
                           <div class="slider-content">
                              <a class="filter-item slider-item{if empty($param.letter)} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$param.area,'lang'=>$param.lang,'year'=>$param.year,'by'=>$param.by],'show')}">全部</a>
                              {maccms:foreach name="$letterArray"}
                              <a class="filter-item slider-item{if $param.letter==$vo} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$param.area,'lang'=>$param.lang,'year'=>$param.year,'letter'=>$vo,'by'=>$param.by],'show')}">{$vo}</a>
                              {/maccms:foreach}
                           </div>
                        </dd>
                     </dl>
                     {/if}
                     <dl class="filter-row clearfix">
                        <dt><span>排序</span></dt>
                        <dd class="filter-slider filter-nav">
                           <div class="slider-content">
                              <a class="filter-item slider-item{if $param.by=='time'||empty($param.by)} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$param.area,'lang'=>$param.lang,'year'=>$param.year,'letter'=>$param.letter,'by'=>'time'],'show')}">最近更新</a>
                              <a class="filter-item slider-item{if $param.by=='hits'} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$param.area,'lang'=>$param.lang,'year'=>$param.year,'letter'=>$param.letter,'by'=>'hits'],'show')}">最多播放</a>
                              <a class="filter-item slider-item{if $param.by=='score'} selected{/if}" href="{:mac_url_type($obj,['class'=>$param.class,'area'=>$param.area,'lang'=>$param.lang,'year'=>$param.year,'letter'=>$param.letter,'by'=>'score'],'show')}">最好评</a>
                           </div>
                        </dd>
                     </dl>
                  </div>
                  </section>
                  <section>
                     <div class="content-grid">

                         
                         
                         {maccms:vod num="30" paging="yes" pageurl="'.$myPageUrl.'" type="current" order="desc" by="time"}
                             <div class="content-item">
                                 <a href="{:mac_url_vod_detail($vo)}" title="{$vo.vod_name}" draggable="false">
                                    <div class="lazyload-image-container">
                                       <div class="lazyload-image-skeleton skeleton"></div>
                                       <img class="lazyload" data-src="{:mac_url_img($vo.vod_pic)}" alt="{$vo.vod_name}" draggable="false">
                                    </div>
                                     <div class="show-name">{$vo.vod_name}</div>
                                     <div class="overlay">
                                         <div class="title">{$vo.vod_name}</div>
                                         <div class="info-typename-remark-time">
                                             <p><span>{$vo.type.type_name}</span></p>
                                             <p>{$vo.vod_remarks} <span class="info-typename-remark-time-vod-time">{$vo.vod_time|date='Y-m-d',###}</span></p>
                                         </div>
                                     </div>
                                     
                                     
                                 </a>
                             </div>
                         {/maccms:vod}
                     </div>
                 </section>
                  {include file="public/paging"}
               </div>
            </div>
            <div class="responsive-right">
               <!-- Add content for right sidebar if needed -->
            </div>
         </div>
      </main>
      {include file="public/foot"}
      <script>
document.addEventListener('DOMContentLoaded', function() {
    // Get elements
    const filterToggle = document.querySelector('.filter-toggle');
    const collapsibleRows = document.querySelector('.collapsible-rows');
    
    if (filterToggle && collapsibleRows) {
        // Function to update toggle state
        function updateToggleState(isCollapsed) {
            collapsibleRows.classList.toggle('collapsed', isCollapsed);
            filterToggle.classList.toggle('collapsed', isCollapsed);
            localStorage.setItem('filterCollapsed', isCollapsed);
        }

        // Add click event listener
        filterToggle.addEventListener('click', function() {
            const isCollapsed = !collapsibleRows.classList.contains('collapsed');
            updateToggleState(isCollapsed);
        });

        // Default to open, restore saved state if user previously collapsed
        const savedState = localStorage.getItem('filterCollapsed') === 'true';
        updateToggleState(savedState);
    }
});
         </script>
      <script src="{$maccms.path_tpl}js/modern-skeletonhider.js"></script>
      <script src="{$maccms.path_tpl}js/modern-filter.js"></script>
   </body>
</html>